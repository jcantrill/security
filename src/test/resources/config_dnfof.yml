#
# HTTP
#   basic (challenging) PREAUTH?
#   proxy (not challenging, needs xff)
#   kerberos (challenging)  PREAUTH?
#   clientcert (not challenging, needs https)

# Authc
#   internal
#   noop
#   ldap  

# Authz
#   ldap  
#   noop



opendistro_security:
  dynamic:
    filtered_alias_mode: disallow
    do_not_fail_on_forbidden: true
    http:
      anonymous_auth_enabled: false
      xff:
        enabled: false
        internalProxies: "192\\.168\\.0\\.10|192\\.168\\.0\\.11"
        remoteIpHeader: "x-forwarded-for"


    authc:
      authentication_domain_kerb:
        http_enabled: false
        transport_enabled: false
        order: 3
        http_authenticator:
          challenge: true
          type: "kerberos"
          config: {}
        authentication_backend:
          type: "noop"
          config: {}
        description: "Migrated from v6"
      authentication_domain_proxy:
        http_enabled: false
        transport_enabled: false
        order: 2
        http_authenticator:
          challenge: true
          type: "proxy"
          config:
          user_header: "x-proxy-user"
          roles_header: "x-proxy-roles"
        authentication_backend:
          type: noop
      authentication_domain_kerb:
        enabled: false
        order: 3
        http_authenticator:
          type: kerberos
        authentication_backend:
          type: noop
    authz:    
      roles_from_myldap:
        enabled: false
        authorization_backend:
          type: ldap
          config:
            rolesearch: "(uniqueMember={0})"
            resolve_nested_roles: true
            rolebase: "ou=groups,o=TEST"
            rolename: "cn"
        description: "Migrated from v6"
    do_not_fail_on_forbidden: true
    multi_rolespan_enabled: false
    hosts_resolver_mode: "ip-only"
    transport_userrname_attribute: null
